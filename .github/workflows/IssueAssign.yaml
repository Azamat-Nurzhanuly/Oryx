name: "Auto Assign Issue"

on:
  issues:
    types: [opened, reopened]

env:
  ISSUE_NUM: ${{ github.event.issue.number }}
  TOKEN: ${{ github.token }}

jobs:
  AutoIssueAssign:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Assign issues
        run: |
          chmod +x ./oncall/autoIssueAssign.sh
          ./oncall/autoIssueAssign.sh --token ${{ env.TOKEN }} --issue ${{ env.ISSUE_NUM }} --custom ${{ vars.CUSTOM_ONCALL_ROTATION }} ${{ vars.ONCALL_LIST }}
